{"version":3,"sources":["turbopack:///[project]/app/pack/[id]/checkout/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/arrow-left.ts","turbopack:///[project]/types/offer.ts"],"sourcesContent":["\"use client\"\n\nimport { Header } from \"@/components/header\"\nimport { Footer } from \"@/components/footer\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { ArrowLeft, Check, Loader2, Tag, AlertCircle } from 'lucide-react'\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { useParams, useRouter } from 'next/navigation'\nimport { createBrowserClient } from \"@/lib/supabase/client\"\nimport type { DiscountCode, PriceBreakdown } from \"@/types/discount\"\nimport { validateDiscountCode as validateDiscountInput } from \"@/types/offer\"\nimport { PLAN_FEATURES, type PlanType } from \"@/lib/plans\"\n\nexport default function CheckoutPage() {\n  const params = useParams()\n  const packId = params.id as string\n  const router = useRouter()\n  const supabase = createBrowserClient()\n\n  const [pack, setPack] = useState<any>(null)\n  const [user, setUser] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n  const [discountCode, setDiscountCode] = useState(\"\")\n  const [appliedDiscount, setAppliedDiscount] = useState<DiscountCode | null>(null)\n  const [isValidatingCode, setIsValidatingCode] = useState(false)\n  const [step, setStep] = useState<\"summary\" | \"payment\" | \"confirm\">(\"summary\")\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [activeOffer, setActiveOffer] = useState<any>(null)\n  const [creatorPlan, setCreatorPlan] = useState<PlanType>(\"free\")\n  const [platformCommission, setPlatformCommission] = useState<number>(0)\n\n  useEffect(() => {\n    const fetchPack = async () => {\n      try {\n        const {\n          data: { user: authUser },\n        } = await supabase.auth.getUser()\n\n        if (!authUser) {\n          router.push(\"/login\")\n          return\n        }\n\n        setUser(authUser)\n\n        const { data, error } = await supabase\n          .from(\"packs\")\n          .select(`\n            *,\n            profiles (\n              username,\n              avatar_url,\n              id,\n              plan\n            )\n          `)\n          .eq(\"id\", packId)\n          .single()\n\n        if (error) throw error\n        setPack(data)\n\n        if (data.profiles?.plan) {\n          setCreatorPlan(data.profiles.plan as PlanType)\n          setPlatformCommission(PLAN_FEATURES[data.profiles.plan as PlanType].commission)\n        }\n\n        const { data: offerData } = await supabase.rpc(\"get_active_offer\", { p_pack_id: packId }).single()\n\n        if (offerData) {\n          setActiveOffer(offerData)\n          setAppliedDiscount({\n            code: \"OFERTA ACTIVA\",\n            type: \"general\",\n            percentage: offerData.discount_percent,\n            isValid: true,\n          })\n        }\n      } catch (error) {\n        console.error(\"Error fetching pack:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPack()\n  }, [packId, router, supabase])\n\n  useEffect(() => {\n    const checkIfFree = async () => {\n      if (pack && pack.price === 0) {\n        try {\n          const response = await fetch(`/api/packs/${packId}/download`)\n          if (response.ok) {\n            const blob = await response.blob()\n            const url = window.URL.createObjectURL(blob)\n            const a = document.createElement(\"a\")\n            a.href = url\n            a.download = `${pack.title.replace(/[^a-zA-Z0-9]/g, \"_\")}.zip`\n            document.body.appendChild(a)\n            a.click()\n            window.URL.revokeObjectURL(url)\n            document.body.removeChild(a)\n            router.push(`/pack/${packId}`)\n          }\n        } catch (error) {\n          console.error(\"Error downloading free pack:\", error)\n          router.push(`/pack/${packId}`)\n        }\n      }\n    }\n    if (pack && loading === false) {\n      checkIfFree()\n    }\n  }, [pack, loading, packId, router])\n\n  // Calculate price breakdown\n  const calculatePriceBreakdown = (): PriceBreakdown => {\n    if (!pack) {\n      return {\n        basePrice: 0,\n        discountAmount: 0,\n        discountPercentage: 0,\n        platformCommission: platformCommission,\n        platformCommissionAmount: 0,\n        totalToPay: 0,\n        creatorEarnings: 0,\n      }\n    }\n\n    const basePrice = pack.price\n    const discountPercentage = appliedDiscount?.isValid ? appliedDiscount.percentage : 0\n    const discountAmount = basePrice * (discountPercentage / 100)\n    const totalToPay = basePrice - discountAmount\n    const platformCommissionAmount = totalToPay * platformCommission\n    const creatorEarnings = totalToPay - platformCommissionAmount\n\n    return {\n      basePrice,\n      discountAmount,\n      discountPercentage,\n      platformCommission: platformCommission,\n      platformCommissionAmount,\n      totalToPay,\n      creatorEarnings,\n    }\n  }\n\n  const validateCode = async (code: string) => {\n    if (!code.trim()) {\n      setAppliedDiscount(null)\n      return\n    }\n\n    setIsValidatingCode(true)\n\n    try {\n      const { data: discountData, error } = await supabase\n        .from(\"discount_codes\")\n        .select(\"*\")\n        .eq(\"pack_id\", packId)\n        .eq(\"code\", code.toUpperCase())\n        .single()\n\n      if (error || !discountData) {\n        setAppliedDiscount({\n          code: code.toUpperCase(),\n          type: \"general\",\n          percentage: 0,\n          isValid: false,\n          errorMessage: \"Código de descuento inválido\",\n        })\n        setIsValidatingCode(false)\n        return\n      }\n\n      const validation = validateDiscountInput(code, discountData.discount_percent.toString())\n\n      if (!validation.isValid) {\n        setAppliedDiscount({\n          code: code.toUpperCase(),\n          type: \"general\",\n          percentage: 0,\n          isValid: false,\n          errorMessage: validation.message,\n        })\n        setIsValidatingCode(false)\n        return\n      }\n\n      // Check if expired\n      if (discountData.expires_at && new Date(discountData.expires_at) < new Date()) {\n        setAppliedDiscount({\n          code: code.toUpperCase(),\n          type: \"general\",\n          percentage: 0,\n          isValid: false,\n          errorMessage: \"Este código ha expirado\",\n        })\n        setIsValidatingCode(false)\n        return\n      }\n\n      // Check max uses\n      if (discountData.max_uses && discountData.uses_count >= discountData.max_uses) {\n        setAppliedDiscount({\n          code: code.toUpperCase(),\n          type: \"general\",\n          percentage: 0,\n          isValid: false,\n          errorMessage: \"Este código ya alcanzó el límite de usos\",\n        })\n        setIsValidatingCode(false)\n        return\n      }\n\n      if (discountData.for_followers) {\n        const { data: followData } = await supabase\n          .from(\"followers\")\n          .select(\"id\")\n          .eq(\"follower_id\", user.id)\n          .eq(\"following_id\", pack.profiles.id)\n          .single()\n\n        if (!followData) {\n          setAppliedDiscount({\n            code: code.toUpperCase(),\n            type: \"follower\",\n            percentage: 0,\n            isValid: false,\n            errorMessage: \"Este código es solo para seguidores del creador\",\n          })\n          setIsValidatingCode(false)\n          return\n        }\n      }\n\n      if (discountData.for_first_purchase) {\n        const { data: purchaseData } = await supabase\n          .from(\"purchases\")\n          .select(\"id\")\n          .eq(\"buyer_id\", user.id)\n          .limit(1)\n          .single()\n\n        if (purchaseData) {\n          setAppliedDiscount({\n            code: code.toUpperCase(),\n            type: \"first_purchase\",\n            percentage: 0,\n            isValid: false,\n            errorMessage: \"Este código es solo para tu primera compra\",\n          })\n          setIsValidatingCode(false)\n          return\n        }\n      }\n\n      const discountType = discountData.for_followers\n        ? \"follower\"\n        : discountData.for_first_purchase\n          ? \"first_purchase\"\n          : \"general\"\n\n      setAppliedDiscount({\n        code: code.toUpperCase(),\n        type: discountType,\n        percentage: discountData.discount_percent,\n        isValid: true,\n      })\n    } catch (error) {\n      console.error(\"Error validating code:\", error)\n      setAppliedDiscount({\n        code: code.toUpperCase(),\n        type: \"general\",\n        percentage: 0,\n        isValid: false,\n        errorMessage: \"Error al validar el código\",\n      })\n    } finally {\n      setIsValidatingCode(false)\n    }\n  }\n\n  const handleApplyCode = () => {\n    validateCode(discountCode)\n  }\n\n  const handleRemoveDiscount = () => {\n    if (activeOffer) {\n      return\n    }\n    setAppliedDiscount(null)\n    setDiscountCode(\"\")\n  }\n\n  const handleConfirmPurchase = async () => {\n    setIsProcessing(true)\n\n    try {\n      const { purchasePack } = await import(\"@/app/plans/actions\")\n      const result = await purchasePack(packId, appliedDiscount?.isValid ? discountCode : undefined)\n\n      if (result?.success && result.init_point) {\n        // Redirect to Mercado Pago checkout\n        window.location.href = result.init_point\n      } else {\n        // Use toast if available, otherwise alert\n        if (typeof window !== \"undefined\" && window.location) {\n          console.error(\"[v0] Payment failed:\", result?.message)\n        }\n      }\n    } catch (error) {\n      console.error(\"[v0] Error in handleConfirmPurchase:\", error)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const formatPrice = (price: number) => {\n    if (price === 0) {\n      return \"GRATIS\"\n    }\n    return new Intl.NumberFormat(\"es-AR\", {\n      style: \"decimal\",\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price)\n  }\n\n  const priceBreakdown = calculatePriceBreakdown()\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Header />\n        <main className=\"flex-1 container mx-auto px-4 py-12 flex items-center justify-center\">\n          <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n        </main>\n        <Footer />\n      </div>\n    )\n  }\n\n  if (!pack) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Header />\n        <main className=\"flex-1 container mx-auto px-4 py-12\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-foreground mb-4\">Pack no encontrado</h1>\n            <Link href=\"/\">\n              <Button>Volver al inicio</Button>\n            </Link>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n\n      <main className=\"flex-1 container mx-auto px-4 py-8 max-w-4xl\">\n        {/* Back Button */}\n        <Link href={`/pack/${packId}`}>\n          <Button variant=\"ghost\" className=\"mb-6 gap-2\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Volver al pack\n          </Button>\n        </Link>\n\n        {/* Progress Steps */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between max-w-2xl mx-auto\">\n            <div className=\"flex flex-col items-center flex-1\">\n              <div\n                className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${\n                  step === \"summary\" ? \"bg-primary text-primary-foreground\" : \"bg-accent text-accent-foreground\"\n                }`}\n              >\n                {step !== \"summary\" ? <Check className=\"h-5 w-5\" /> : \"1\"}\n              </div>\n              <div className=\"text-xs font-medium mt-2 text-center\">Resumen</div>\n            </div>\n            <div className={`flex-1 h-0.5 ${step !== \"summary\" ? \"bg-primary\" : \"bg-border\"}`} />\n            <div className=\"flex flex-col items-center flex-1\">\n              <div\n                className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${\n                  step === \"payment\"\n                    ? \"bg-primary text-primary-foreground\"\n                    : step === \"confirm\"\n                      ? \"bg-accent text-accent-foreground\"\n                      : \"bg-muted text-muted-foreground\"\n                }`}\n              >\n                {step === \"confirm\" ? <Check className=\"h-5 w-5\" /> : \"2\"}\n              </div>\n              <div className=\"text-xs font-medium mt-2 text-center\">Pago</div>\n            </div>\n            <div className={`flex-1 h-0.5 ${step === \"confirm\" ? \"bg-primary\" : \"bg-border\"}`} />\n            <div className=\"flex flex-col items-center flex-1\">\n              <div\n                className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${\n                  step === \"confirm\" ? \"bg-primary text-primary-foreground\" : \"bg-muted text-muted-foreground\"\n                }`}\n              >\n                3\n              </div>\n              <div className=\"text-xs font-medium mt-2 text-center\">Confirmar</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Step 1: Summary */}\n            {step === \"summary\" && (\n              <>\n                <Card className=\"p-6 rounded-3xl border-border\">\n                  <h2 className=\"text-2xl font-black text-foreground mb-6\">Resumen del pedido</h2>\n\n                  <div className=\"flex gap-4 mb-6\">\n                    <img\n                      src={pack.cover_image_url || \"/placeholder.svg?height=120&width=120\"}\n                      alt={pack.title}\n                      className=\"w-24 h-24 rounded-2xl object-cover\"\n                    />\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-bold text-lg text-foreground mb-1\">{pack.title}</h3>\n                      <p className=\"text-sm text-muted-foreground mb-2\">Por {pack.profiles?.username || \"Usuario\"}</p>\n                      {pack.genre && (\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {pack.genre}\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"border-t border-border pt-6\">\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <Tag className=\"h-4 w-4 text-primary\" />\n                      <h3 className=\"font-bold text-foreground\">Código de descuento</h3>\n                    </div>\n\n                    {activeOffer && (\n                      <div className=\"mb-3 p-4 rounded-xl bg-red-500/10 border border-red-500/20\">\n                        <div className=\"flex items-start gap-3\">\n                          <Check className=\"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5\" />\n                          <div className=\"flex-1\">\n                            <p className=\"font-bold text-red-500 text-sm\">¡Oferta activa!</p>\n                            <p className=\"text-sm text-muted-foreground mt-1\">\n                              {activeOffer.discount_percent}% de descuento aplicado automáticamente\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {!activeOffer && !appliedDiscount?.isValid && (\n                      <div className=\"flex gap-2\">\n                        <Input\n                          placeholder=\"Ingresá tu código\"\n                          value={discountCode}\n                          onChange={(e) => setDiscountCode(e.target.value.toUpperCase())}\n                          onKeyDown={(e) => e.key === \"Enter\" && handleApplyCode()}\n                          className=\"flex-1 rounded-xl\"\n                          disabled={isValidatingCode}\n                        />\n                        <Button\n                          onClick={handleApplyCode}\n                          disabled={!discountCode.trim() || isValidatingCode}\n                          className=\"rounded-xl\"\n                        >\n                          {isValidatingCode ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Aplicar\"}\n                        </Button>\n                      </div>\n                    )}\n\n                    {!activeOffer && appliedDiscount && (\n                      <div\n                        className={`mt-3 p-4 rounded-xl flex items-start gap-3 ${\n                          appliedDiscount.isValid\n                            ? \"bg-green-500/10 border border-green-500/20\"\n                            : \"bg-destructive/10 border border-destructive/20\"\n                        }`}\n                      >\n                        {appliedDiscount.isValid ? (\n                          <>\n                            <Check className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                            <div className=\"flex-1\">\n                              <p className=\"font-bold text-green-500 text-sm\">¡Código aplicado!</p>\n                              <p className=\"text-sm text-muted-foreground mt-1\">\n                                Descuento del {appliedDiscount.percentage}% aplicado\n                              </p>\n                            </div>\n                            <Button variant=\"ghost\" size=\"sm\" onClick={handleRemoveDiscount} className=\"text-xs\">\n                              Quitar\n                            </Button>\n                          </>\n                        ) : (\n                          <>\n                            <AlertCircle className=\"h-5 w-5 text-destructive flex-shrink-0 mt-0.5\" />\n                            <div className=\"flex-1\">\n                              <p className=\"font-bold text-destructive text-sm\">{appliedDiscount.errorMessage}</p>\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </Card>\n\n                <Button className=\"w-full rounded-full h-14 text-base font-bold\" onClick={() => setStep(\"payment\")}>\n                  Continuar al pago\n                </Button>\n              </>\n            )}\n\n            {/* Step 2: Payment Method */}\n            {step === \"payment\" && (\n              <>\n                <Card className=\"p-6 rounded-3xl border-border\">\n                  <h2 className=\"text-2xl font-black text-foreground mb-6\">Método de pago</h2>\n\n                  {/* Mercado Pago UI */}\n                  <div className=\"space-y-4\">\n                    <div className=\"p-4 border-2 border-primary rounded-2xl bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-12 h-12 bg-[#009EE3] rounded-xl flex items-center justify-center\">\n                            <svg className=\"w-8 h-8\" viewBox=\"0 0 24 24\" fill=\"white\">\n                              <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\" />\n                            </svg>\n                          </div>\n                          <div>\n                            <div className=\"font-bold text-foreground\">Mercado Pago</div>\n                            <div className=\"text-sm text-muted-foreground\">Tarjetas, débito o efectivo</div>\n                          </div>\n                        </div>\n                        <div className=\"w-5 h-5 rounded-full border-2 border-primary bg-primary flex items-center justify-center\">\n                          <div className=\"w-2 h-2 bg-primary-foreground rounded-full\" />\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"p-4 text-sm text-muted-foreground bg-muted/50 rounded-xl\">\n                      <p className=\"font-semibold text-foreground mb-2\">Pagá con Mercado Pago:</p>\n                      <ul className=\"space-y-1 list-disc list-inside\">\n                        <li>Tarjetas de crédito y débito</li>\n                        <li>Dinero en cuenta de Mercado Pago</li>\n                        <li>Efectivo en puntos de pago</li>\n                      </ul>\n                    </div>\n                  </div>\n                </Card>\n\n                <div className=\"flex gap-3\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1 rounded-full h-14 text-base font-bold bg-transparent\"\n                    onClick={() => setStep(\"summary\")}\n                  >\n                    Volver\n                  </Button>\n                  <Button className=\"flex-1 rounded-full h-14 text-base font-bold\" onClick={() => setStep(\"confirm\")}>\n                    Continuar\n                  </Button>\n                </div>\n              </>\n            )}\n\n            {/* Step 3: Confirm Purchase */}\n            {step === \"confirm\" && (\n              <>\n                <Card className=\"p-6 rounded-3xl border-border\">\n                  <h2 className=\"text-2xl font-black text-foreground mb-6\">Confirmar compra</h2>\n\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center gap-4\">\n                      <img\n                        src={pack.cover_image_url || \"/placeholder.svg?height=80&width=80\"}\n                        alt={pack.title}\n                        className=\"w-20 h-20 rounded-xl object-cover\"\n                      />\n                      <div>\n                        <h3 className=\"font-bold text-foreground\">{pack.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">Por {pack.profiles?.username || \"Usuario\"}</p>\n                      </div>\n                    </div>\n\n                    <div className=\"border-t border-border pt-4 space-y-3\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Método de pago:</span>\n                        <span className=\"font-semibold text-foreground\">Mercado Pago</span>\n                      </div>\n                      {appliedDiscount?.isValid && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Código aplicado:</span>\n                          <span className=\"font-semibold text-green-500\">{appliedDiscount.code}</span>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"bg-muted/50 p-4 rounded-xl text-sm text-muted-foreground\">\n                      Al confirmar la compra, serás redirigido a Mercado Pago para completar el pago de forma segura.\n                    </div>\n                  </div>\n                </Card>\n\n                <div className=\"flex gap-3\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1 rounded-full h-14 text-base font-bold bg-transparent\"\n                    onClick={() => setStep(\"payment\")}\n                    disabled={isProcessing}\n                  >\n                    Volver\n                  </Button>\n                  <Button\n                    className=\"flex-1 rounded-full h-14 text-base font-bold\"\n                    onClick={handleConfirmPurchase}\n                    disabled={isProcessing}\n                  >\n                    {isProcessing ? (\n                      <>\n                        <Loader2 className=\"h-5 w-5 animate-spin mr-2\" />\n                        Procesando...\n                      </>\n                    ) : (\n                      \"Confirmar compra\"\n                    )}\n                  </Button>\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Price Summary Sidebar */}\n          <div className=\"lg:col-span-1\">\n            <Card className=\"p-6 rounded-3xl border-border sticky top-4\">\n              <h3 className=\"text-lg font-black text-foreground mb-4\">Resumen de precio</h3>\n\n              <div className=\"space-y-3 mb-4\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Precio base</span>\n                  <span className=\"font-semibold text-foreground\">${formatPrice(priceBreakdown.basePrice)}</span>\n                </div>\n\n                {appliedDiscount?.isValid && (\n                  <div className=\"flex justify-between text-sm\">\n                    <span className={activeOffer ? \"text-red-500\" : \"text-green-500\"}>\n                      Descuento ({appliedDiscount.percentage}%)\n                    </span>\n                    <span className={`font-semibold ${activeOffer ? \"text-red-500\" : \"text-green-500\"}`}>\n                      -${formatPrice(priceBreakdown.discountAmount)}\n                    </span>\n                  </div>\n                )}\n\n                <div className=\"border-t border-border pt-3\">\n                  <div className=\"flex justify-between items-baseline mb-1\">\n                    <span className=\"text-lg font-bold text-foreground\">Total a pagar</span>\n                    <span className=\"text-2xl font-black text-primary\">${formatPrice(priceBreakdown.totalToPay)}</span>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground text-right\">\n                    {priceBreakdown.totalToPay === 0 ? \"\" : \"ARS\"}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-border pt-4 mt-4\">\n                <div className=\"bg-accent/50 p-4 rounded-xl space-y-2\">\n                  <h4 className=\"text-sm font-bold text-foreground\">Desglose para el creador</h4>\n                  <div className=\"space-y-1.5 text-xs\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Precio base</span>\n                      <span className=\"text-foreground\">${formatPrice(priceBreakdown.basePrice)}</span>\n                    </div>\n                    {appliedDiscount?.isValid && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Descuento aplicado</span>\n                        <span className=\"text-foreground\">-${formatPrice(priceBreakdown.discountAmount)}</span>\n                      </div>\n                    )}\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Subtotal</span>\n                      <span className=\"text-foreground\">${formatPrice(priceBreakdown.totalToPay)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">\n                        Comisión plataforma ({(platformCommission * 100).toFixed(0)}%)\n                      </span>\n                      <span className=\"text-foreground\">-${formatPrice(priceBreakdown.platformCommissionAmount)}</span>\n                    </div>\n                    <div className=\"border-t border-border pt-1.5 flex justify-between font-bold\">\n                      <span className=\"text-foreground\">Ganancia del creador</span>\n                      <span className=\"text-primary\">${formatPrice(priceBreakdown.creatorEarnings)}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Card>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","export interface PackOffer {\n  id: string\n  pack_id: string\n  discount_percent: number\n  start_date: string\n  end_date: string\n  created_at: string\n}\n\nexport interface DiscountValidation {\n  isValid: boolean\n  message: string\n  percent?: number\n}\n\nexport function validateDiscountCode(code: string, percent: string): DiscountValidation {\n  const percentNum = Number.parseInt(percent)\n\n  // Check for comma\n  if (percent.includes(\",\")) {\n    return {\n      isValid: false,\n      message: \"El porcentaje no puede contener comas. Usa solo números enteros.\",\n    }\n  }\n\n  // Check minimum\n  if (percentNum < 5) {\n    return {\n      isValid: false,\n      message: \"El descuento mínimo es 5%\",\n    }\n  }\n\n  // Check if it's a valid integer\n  if (isNaN(percentNum) || percentNum !== Number.parseFloat(percent)) {\n    return {\n      isValid: false,\n      message: \"Ingresa un número entero válido\",\n    }\n  }\n\n  return {\n    isValid: true,\n    message: \"Código válido\",\n    percent: percentNum,\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[1]}