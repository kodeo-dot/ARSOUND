module.exports=[51937,a=>{"use strict";var b=a.i(87924),c=a.i(70382),d=a.i(28887),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(46893),i=a.i(73320),j=a.i(79165),k=a.i(70106);let l=(0,k.default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var m=a.i(51243),n=a.i(90166);let o=(0,k.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var p=a.i(27275),q=a.i(33350),r=a.i(96221),s=a.i(33508),t=a.i(1027),u=a.i(86520),v=a.i(92e3),w=a.i(72131),x=a.i(87682),y=a.i(7554),z=a.i(70121),A=a.i(50104),B=a.i(25152),C=a.i(77994),D=a.i(3688),E=a.i(30553),F="Switch",[G,H]=(0,A.createContextScope)(F),[I,J]=G(F),K=w.forwardRef((a,c)=>{let{__scopeSwitch:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j="on",onCheckedChange:k,form:l,...m}=a,[n,o]=w.useState(null),p=(0,z.useComposedRefs)(c,a=>o(a)),q=w.useRef(!1),r=!n||l||!!n.closest("form"),[s,t]=(0,B.useControllableState)({prop:f,defaultProp:g??!1,onChange:k,caller:F});return(0,b.jsxs)(I,{scope:d,checked:s,disabled:i,children:[(0,b.jsx)(E.Primitive.button,{type:"button",role:"switch","aria-checked":s,"aria-required":h,"data-state":O(s),"data-disabled":i?"":void 0,disabled:i,value:j,...m,ref:p,onClick:(0,y.composeEventHandlers)(a.onClick,a=>{t(a=>!a),r&&(q.current=a.isPropagationStopped(),q.current||a.stopPropagation())})}),r&&(0,b.jsx)(N,{control:n,bubbles:!q.current,name:e,value:j,checked:s,required:h,disabled:i,form:l,style:{transform:"translateX(-100%)"}})]})});K.displayName=F;var L="SwitchThumb",M=w.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=J(L,d);return(0,b.jsx)(E.Primitive.span,{"data-state":O(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});M.displayName=L;var N=w.forwardRef(({__scopeSwitch:a,control:c,checked:d,bubbles:e=!0,...f},g)=>{let h=w.useRef(null),i=(0,z.useComposedRefs)(h,g),j=(0,C.usePrevious)(d),k=(0,D.useSize)(c);return w.useEffect(()=>{let a=h.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==d&&b){let c=new Event("click",{bubbles:e});b.call(a,d),a.dispatchEvent(c)}},[j,d,e]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:d,...f,tabIndex:-1,ref:i,style:{...f.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function O(a){return a?"checked":"unchecked"}N.displayName="SwitchBubbleInput";var P=a.i(97895);let Q=w.forwardRef(({className:a,...c},d)=>(0,b.jsx)(K,{className:(0,P.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(M,{className:(0,P.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Q.displayName=K.displayName;var R=a.i(69240),S=a.i(50944),T=a.i(77687),U=a.i(54161),V=a.i(89510),W=a.i(3130),X=a.i(38246);async function Y(a){let b=(0,R.createBrowserClient)();try{let{data:c,error:d}=await b.rpc("count_total_packs",{p_user_id:a}),{data:e,error:f}=await b.rpc("count_packs_this_month",{p_user_id:a});if(d||f)return console.error("[v0] Error fetching pack stats:",d||f),{totalPacks:0,packsThisMonth:0};return{totalPacks:c||0,packsThisMonth:e||0}}catch(a){return console.error("Error fetching pack stats:",a),{totalPacks:0,packsThisMonth:0}}}async function Z(a,b,c){let d=[],{totalPacks:e,packsThisMonth:f}=await Y(a),g=V.PLAN_FEATURES[b];return"free"===b&&null!==g.maxTotalPacks&&e>=g.maxTotalPacks&&d.push(`Alcanzaste el l\xedmite de ${g.maxTotalPacks} packs totales del plan FREE. Mejor\xe1 tu plan para subir m\xe1s.`),"de_0_a_hit"===b&&null!==g.maxPacksPerMonth&&f>=g.maxPacksPerMonth&&d.push(`Alcanzaste el l\xedmite de ${g.maxPacksPerMonth} packs por mes del plan De 0 a Hit. Esper\xe1 al pr\xf3ximo mes o mejor\xe1 tu plan.`),null!==g.maxPrice&&c>g.maxPrice&&d.push(`El precio m\xe1ximo permitido en tu plan es $${g.maxPrice.toLocaleString()} ARS. Reduc\xed el precio o mejor\xe1 tu plan.`),{valid:0===d.length,errors:d}}async function $(a,b){let{totalPacks:c,packsThisMonth:d}=await Y(a),e=V.PLAN_FEATURES[b];return"free"===b&&null!==e.maxTotalPacks&&c>=e.maxTotalPacks?{canUpload:!1,reason:`Alcanzaste tu l\xedmite de ${e.maxTotalPacks} packs totales. Mejor\xe1 tu plan para subir m\xe1s.`}:"de_0_a_hit"===b&&null!==e.maxPacksPerMonth&&d>=e.maxPacksPerMonth?{canUpload:!1,reason:`Alcanzaste tu l\xedmite de ${e.maxPacksPerMonth} packs este mes. Esper\xe1 al pr\xf3ximo mes o mejor\xe1 tu plan.`}:{canUpload:!0}}function _(){let[a,k]=(0,w.useState)(!1),[y,z]=(0,w.useState)(!1),[A,B]=(0,w.useState)(0),C=(0,S.useRouter)(),D=(0,R.createBrowserClient)(),[E,F]=(0,w.useState)(""),[G,H]=(0,w.useState)(""),[I,J]=(0,w.useState)(""),[K,L]=(0,w.useState)(""),[M,N]=(0,w.useState)(""),[O,P]=(0,w.useState)(0),[Y,_]=(0,w.useState)(""),[aa,ab]=(0,w.useState)(!1),[ac,ad]=(0,w.useState)(null),[ae,af]=(0,w.useState)(null),[ag,ah]=(0,w.useState)(null),[ai,aj]=(0,w.useState)(""),[ak,al]=(0,w.useState)(null),[am,an]=(0,w.useState)(""),[ao,ap]=(0,w.useState)(!1),[aq,ar]=(0,w.useState)(""),[as,at]=(0,w.useState)(""),[au,av]=(0,w.useState)("all"),[aw,ax]=(0,w.useState)([]),[ay,az]=(0,w.useState)(""),[aA,aB]=(0,w.useState)("free"),[aC,aD]=(0,w.useState)(null),[aE,aF]=(0,w.useState)(null),[aG,aH]=(0,w.useState)(!0),[aI,aJ]=(0,w.useState)(null),[aK,aL]=(0,w.useState)(!1),aM=V.PLAN_FEATURES[aA].maxPrice||65e3,aN=(0,V.getMaxDiscountPercent)(aA),aO=(0,V.getMaxFileSizeMB)(aA),aP=1024*aO*1024,aQ=V.PLAN_FEATURES[aA]?.commission??.15,aR=Math.min(Number.parseFloat(Y)||0,aM),aS=Math.min(Number.parseFloat(aq)||0,aN),aT=ao?aR*aS/100:0,aU=aR-aT,aV=aU*aQ,aW=aU-aV;(0,w.useEffect)(()=>{(async()=>{let{data:{user:a}}=await D.auth.getUser();if(a){k(!0);try{console.log("[v0] Fetching plan for user:",a.id);let{data:b,error:c}=await D.from("profiles").select("plan, mp_connected").eq("id",a.id).single();if(c?.code==="PGRST116"){console.log("[v0] Profile doesn't exist, creating one...");let{error:b}=await D.from("profiles").insert({id:a.id,username:a.email?.split("@")[0]||"user_"+a.id.slice(0,8),plan:"free",mp_connected:!1});b?console.warn("[v0] Could not create profile:",b.message):console.log("[v0] Profile created successfully"),aB("free"),aL(!1)}else if(c)console.warn("[v0] Error fetching profile:",c.message),aB("free"),aL(!1);else if(b){let c=b.plan||"free";c=c.replace(/-/g,"_"),aB(c),aL(b.mp_connected||!1);let d=await $(a.id,c);aH(d.canUpload),aJ(d.reason||null)}}catch(a){console.warn("[v0] Could not fetch plan, using default",a),aB("free"),aL(!1)}}else C.push("/login")})()},[D,C]);let aX=()=>{let a=ay.trim();a.length>12?(0,T.toast)({title:"Tag muy largo",description:"Los tags deben tener máximo 12 caracteres",variant:"destructive"}):a&&aw.length<5&&!aw.includes(a)?(ax([...aw,a]),az("")):aw.includes(a)?(0,T.toast)({title:"Tag duplicado",description:"Este tag ya fue agregado",variant:"destructive"}):aw.length>=5&&(0,T.toast)({title:"Límite alcanzado",description:"Máximo 5 tags permitidos",variant:"destructive"})},aY=async(a,b)=>{let{data:{user:c}}=await D.auth.getUser();if(!c)throw Error("No user found");let d=a.name.split(".").pop(),e=`${c.id}/${b}/${Date.now()}.${d}`;try{let{data:b,error:c}=await D.storage.from("samplepacks").upload(e,a,{cacheControl:"3600",upsert:!1});if(c)if(c.message.includes("bucket"))throw Error(`Storage error: Bucket not accessible. ${c.message}`);else if(c.message.includes("permission"))throw Error("Storage error: Permission denied. Check RLS policies.");else if(c.message.includes("size"))throw Error(`File too large. Maximum size: ${aO}MB`);else throw Error(`Storage upload failed: ${c.message}`);if(!b)throw Error("Upload succeeded but no data returned from storage");let{data:{publicUrl:d}}=D.storage.from("samplepacks").getPublicUrl(e);if(!d)throw Error("Could not generate public URL for uploaded file");return d}catch(a){throw console.error(`[v0] Error uploading ${b} file:`,a),a}},aZ=async a=>{if(a.preventDefault(),!aG)return void(0,T.toast)({title:"No puedes subir packs",description:aI||"Alcanzaste tu límite de uploads",variant:"destructive"});if(aR>0&&!aK)return void(0,T.toast)({title:"Mercado Pago no conectado",description:"Necesitás conectar tu cuenta de Mercado Pago para vender packs. Andá a tu perfil.",variant:"destructive"});if(!E||!G||!I||!Y||!ag||!ak||!aa)return void(0,T.toast)({title:"Error",description:"Por favor completá todos los campos requeridos",variant:"destructive"});if(ak&&ak.size>aP){let a=(ak.size/1048576).toFixed(2);(0,T.toast)({title:"Archivo demasiado grande",description:`El archivo (${a} MB) excede el l\xedmite de ${aO} MB para tu plan.`,variant:"destructive"});return}if(ao&&aS>aN)return void(0,T.toast)({title:"Descuento no permitido",description:`Tu plan permite m\xe1ximo ${aN}% de descuento`,variant:"destructive"});z(!0);try{let{data:{user:a}}=await D.auth.getUser();if(!a)throw Error("No user found");let b=await Z(a.id,aA,aR);if(!b.valid){aD(b.errors[0]),(0,T.toast)({title:"No puedes subir este pack",description:b.errors[0],variant:"destructive"}),z(!1);return}}catch(a){console.error("Validation error:",a),z(!1);return}B(0);try{let a,b,{data:{user:c}}=await D.auth.getUser();if(!c)throw Error("No user found");B(20);let d=null;try{ac&&(d=await aY(ac,"covers"))}catch(b){let a=b.message||"Error uploading cover image";aD(a),(0,T.toast)({title:"Error subiendo portada",description:a,variant:"destructive"}),z(!1);return}B(40);try{a=await aY(ag,"demos")}catch(b){let a=b.message||"Error uploading demo audio";aD(a),(0,T.toast)({title:"Error subiendo demo",description:a,variant:"destructive"}),z(!1);return}B(60);try{b=await aY(ak,"packs")}catch(b){let a=b.message||"Error uploading pack file";aD(a),(0,T.toast)({title:"Error subiendo archivo",description:a,variant:"destructive"}),z(!1);return}B(80);let e=await fetch("/api/packs/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:E,description:G,genre:I,bpm:K||null,price:Number.parseInt(Y),cover_image_url:d,demo_audio_url:a,file_url:b,tags:aw,has_discount:ao,discount_percent:ao?Number.parseInt(aq):0,discountCode:ao?as:null,discountType:ao?au:null})}),f=await e.json();if(!e.ok){let a=f.details||f.error||"Unknown error occurred";aD(a),(0,T.toast)({title:"Error al crear el pack",description:a,variant:"destructive"}),z(!1);return}B(100),(0,T.toast)({title:"Pack subido exitosamente!",description:"Tu pack ya está disponible en ARSOUND"}),setTimeout(()=>{C.push("/")},1500)}catch(b){console.error("[v0] Upload error:",b);let a=b.message||"An unexpected error occurred";aD(a),(0,T.toast)({title:"Error al subir el pack",description:a,variant:"destructive"})}finally{z(!1),B(0)}};return a?(0,b.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,b.jsx)(c.Header,{}),(0,b.jsx)("main",{className:"flex-1 container mx-auto px-4 py-16",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"space-y-3 mb-12",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 text-sm font-semibold text-primary",children:[(0,b.jsx)(i.Upload,{className:"h-4 w-4"}),"SUBIR PACK"]}),(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-foreground",children:"Publicá tu Sample Pack"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:"Compartí tus sonidos con miles de productores argentinos"})]}),"free"===aA&&(0,b.jsx)(W.Card,{className:"p-8 rounded-3xl border-2 border-primary/30 bg-primary/5 mb-12",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-black text-foreground mb-3",children:"¿Querés tener el 100% de tus ganancias?"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Mejorá tu plan y accedé a beneficios exclusivos como comisiones reducidas, sin límites de packs y descuentos ilimitados."}),(0,b.jsx)(X.default,{href:"/plans",children:(0,b.jsxs)(e.Button,{className:"gap-2 rounded-full h-12 bg-primary hover:bg-primary/90",children:[(0,b.jsx)(t.Zap,{className:"h-4 w-4"}),"Mejorar Plan"]})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"p-4 rounded-2xl border border-border bg-card",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(t.Zap,{className:"h-5 w-5 text-orange-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-foreground text-sm",children:"De 0 a Hit - 5.000 ARS/mes"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(100*V.PLAN_FEATURES.de_0_a_hit.commission).toFixed(0),"% comisión, hasta 50% descuento"]})]})]})}),(0,b.jsx)("div",{className:"p-4 rounded-2xl border border-border bg-card",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(u.Crown,{className:"h-5 w-5 text-purple-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-foreground text-sm",children:"Studio Plus - 15.000 ARS/mes"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(100*V.PLAN_FEATURES.studio_plus.commission).toFixed(0),"% comisión, descuentos ilimitados"]})]})]})})]})]})}),!aG&&(0,b.jsx)(W.Card,{className:"p-6 rounded-2xl border-2 border-destructive/50 bg-destructive/10 mb-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(v.AlertCircle,{className:"h-6 w-6 text-destructive flex-shrink-0 mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-bold text-destructive text-lg mb-2",children:"No puedes subir más packs"}),(0,b.jsx)("p",{className:"text-destructive/90 mb-4",children:aI}),(0,b.jsx)(X.default,{href:"/plans",children:(0,b.jsxs)(e.Button,{className:"gap-2 rounded-full bg-primary hover:bg-primary/90",children:[(0,b.jsx)(t.Zap,{className:"h-4 w-4"}),"Mejorar Plan"]})})]})]})}),aR>0&&!aK&&(0,b.jsx)(W.Card,{className:"p-6 rounded-2xl border-2 border-amber-500/50 bg-amber-500/10 mb-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(v.AlertCircle,{className:"h-6 w-6 text-amber-600 flex-shrink-0 mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-bold text-amber-600 text-lg mb-2",children:"Conectá tu cuenta de Mercado Pago"}),(0,b.jsx)("p",{className:"text-amber-600/90 mb-4",children:"Para vender packs necesitás conectar tu cuenta de Mercado Pago. Así vas a recibir tus ganancias automáticamente."}),(0,b.jsx)(X.default,{href:"/profile",children:(0,b.jsx)(e.Button,{className:"gap-2 rounded-full bg-amber-600 hover:bg-amber-700 text-white",children:"Conectar Mercado Pago"})})]})]})}),y&&(0,b.jsxs)("div",{className:"mb-8 bg-card rounded-xl p-6 border-2 border-primary",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)(r.Loader2,{className:"h-5 w-5 animate-spin text-primary"}),(0,b.jsx)("p",{className:"font-bold text-foreground",children:"Subiendo tu pack..."})]}),(0,b.jsx)("div",{className:"w-full bg-secondary rounded-full h-3",children:(0,b.jsx)("div",{className:"bg-primary h-3 rounded-full transition-all duration-300",style:{width:`${A}%`}})}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[A,"% completado"]})]}),(0,b.jsxs)("form",{onSubmit:aZ,className:"space-y-10",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Label,{htmlFor:"cover",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,b.jsx)(j.ImageIcon,{className:"h-5 w-5 text-primary"}),"Portada del Pack"]}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-border rounded-2xl p-12 hover:border-primary/50 transition-all bg-card",children:[(0,b.jsx)("input",{id:"cover",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){ad(b);let a=new FileReader;a.onloadend=()=>{af(a.result)},a.readAsDataURL(b)}},className:"hidden",disabled:y}),(0,b.jsx)("label",{htmlFor:"cover",className:"flex flex-col items-center justify-center cursor-pointer",children:ae?(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:ae||"/placeholder.svg",alt:"Preview",className:"max-h-80 rounded-xl object-cover border-2 border-border"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-white font-semibold",children:"Cambiar imagen"})})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:(0,b.jsx)(i.Upload,{className:"h-10 w-10 text-primary"})}),(0,b.jsx)("p",{className:"text-base font-bold text-foreground mb-2",children:"Hacé clic para subir la portada"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"PNG, JPG o WEBP (máx. 5MB)"})]})})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Label,{htmlFor:"packName",className:"text-lg font-bold text-foreground",children:"Nombre del Pack *"}),(0,b.jsx)(f.Input,{id:"packName",placeholder:"Ej: Trap Argentino Vol. 1",value:E,onChange:a=>F(a.target.value),className:"text-base h-12 rounded-xl bg-card border-border",required:!0,disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Label,{htmlFor:"genre",className:"text-lg font-bold text-foreground",children:"Género *"}),(0,b.jsxs)(x.Select,{value:I,onValueChange:J,disabled:y,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-12 rounded-xl bg-card border-border text-base",children:(0,b.jsx)(x.SelectValue,{placeholder:"Seleccionar género"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"RKT",children:"RKT"}),(0,b.jsx)(x.SelectItem,{value:"TRAP",children:"TRAP"}),(0,b.jsx)(x.SelectItem,{value:"REGGAETON",children:"REGGAETON"}),(0,b.jsx)(x.SelectItem,{value:"CUMBIA",children:"CUMBIA"}),(0,b.jsx)(x.SelectItem,{value:"CUMBIA_VILLERA",children:"CUMBIA VILLERA"}),(0,b.jsx)(x.SelectItem,{value:"DRILL",children:"DRILL"}),(0,b.jsx)(x.SelectItem,{value:"CUARTETO",children:"CUARTETO"}),(0,b.jsx)(x.SelectItem,{value:"DANCEHALL",children:"DANCEHALL"}),(0,b.jsx)(x.SelectItem,{value:"LATIN_URBANO",children:"LATIN URBANO"}),(0,b.jsx)(x.SelectItem,{value:"AFROTRAP",children:"AFROTRAP"}),(0,b.jsx)(x.SelectItem,{value:"HIP_HOP",children:"HIP HOP"}),(0,b.jsx)(x.SelectItem,{value:"DEMBOW",children:"DEMBOW"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 md:col-span-2",children:[(0,b.jsx)(g.Label,{htmlFor:"bpmRange",className:"text-lg font-bold text-foreground",children:"Rango de BPM"}),(0,b.jsxs)(x.Select,{value:K,onValueChange:L,disabled:y,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-12 rounded-xl bg-card border-border text-base",children:(0,b.jsx)(x.SelectValue,{placeholder:"Seleccionar rango de BPM"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"50-100",children:"50 - 100 BPM"}),(0,b.jsx)(x.SelectItem,{value:"100-150",children:"100 - 150 BPM"}),(0,b.jsx)(x.SelectItem,{value:"200-250",children:"200 - 250 BPM"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Label,{htmlFor:"description",className:"text-lg font-bold text-foreground",children:"Descripción *"}),(0,b.jsx)(h.Textarea,{id:"description",placeholder:"Contá sobre tu pack: qué incluye, instrumentos, estilo...",value:G,onChange:a=>H(a.target.value),className:"min-h-32 text-base rounded-xl bg-card border-border resize-none",required:!0,disabled:y})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Label,{htmlFor:"demo",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,b.jsx)(l,{className:"h-5 w-5 text-primary"}),"Demo (Audio Preview) *"]}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-border rounded-xl p-8 hover:border-primary/50 transition-all bg-card",children:[(0,b.jsx)("input",{id:"demo",type:"file",accept:"audio/*",onChange:a=>{let b=a.target.files?.[0];b&&(ah(b),aj(b.name))},className:"hidden",required:!0,disabled:y}),(0,b.jsx)("label",{htmlFor:"demo",className:"flex flex-col items-center justify-center cursor-pointer",children:ai?(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(l,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"text-left flex-1",children:[(0,b.jsx)("p",{className:"font-bold text-foreground text-sm",children:ai}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Listo para subir"})]})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l,{className:"h-10 w-10 text-muted-foreground mb-3 mx-auto"}),(0,b.jsx)("p",{className:"text-sm font-bold text-foreground mb-1",children:"Subir demo"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"MP3, WAV (máx. 10MB)"})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Label,{htmlFor:"packFile",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,b.jsx)(m.FileArchive,{className:"h-5 w-5 text-primary"}),"Archivo del Pack *"]}),(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-xl p-8 transition-all bg-card ${aE?"border-red-500/50 hover:border-red-500/50":"border-border hover:border-primary/50"}`,children:[(0,b.jsx)("input",{id:"packFile",type:"file",accept:".zip,.rar",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>aP){let a=(b.size/1048576).toFixed(2),c=`El archivo es muy grande (${a} MB). Tu plan permite m\xe1ximo ${aO} MB.`;aF(c),(0,T.toast)({title:"Archivo demasiado grande",description:c,variant:"destructive"});return}aF(null),al(b),an(b.name);let a=(b.size/1048576).toFixed(2);N(`${a} MB`),P(0)}},className:"hidden",required:!0,disabled:y}),(0,b.jsx)("label",{htmlFor:"packFile",className:"flex flex-col items-center justify-center cursor-pointer",children:am?(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-secondary/10 flex items-center justify-center",children:(0,b.jsx)(m.FileArchive,{className:"h-6 w-6 text-secondary"})}),(0,b.jsxs)("div",{className:"text-left flex-1",children:[(0,b.jsx)("p",{className:"font-bold text-foreground text-sm",children:am}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:M})]})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(m.FileArchive,{className:"h-10 w-10 text-muted-foreground mb-3 mx-auto"}),(0,b.jsx)("p",{className:"text-sm font-bold text-foreground mb-1",children:"Subir ZIP/RAR"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ZIP o RAR (máx. ",aO," MB)"]})]})})]}),aE&&(0,b.jsxs)("div",{className:"flex gap-2 p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[(0,b.jsx)(v.AlertCircle,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-red-500 font-medium",children:aE})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Label,{htmlFor:"tags",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,b.jsx)(q.Tag,{className:"h-5 w-5 text-primary"}),"Tags (hasta 5, máximo 12 caracteres)"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Agregá palabras clave para que los usuarios encuentren tu pack más fácilmente"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(f.Input,{id:"tags",placeholder:"Ej: 808, melodías, oscuro...",value:ay,onChange:a=>{let b=a.target.value;b.length<=12&&az(b)},onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),aX())},className:"text-base h-12 rounded-xl bg-card border-border pr-16",disabled:y||aw.length>=5,maxLength:12}),(0,b.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground",children:[ay.length,"/12"]})]}),(0,b.jsx)(e.Button,{type:"button",onClick:aX,disabled:y||aw.length>=5||!ay.trim(),className:"h-12 px-6 rounded-xl",children:"Agregar"})]}),aw.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:aw.map((a,c)=>(0,b.jsxs)(U.Badge,{variant:"secondary",className:"px-4 py-2 rounded-full text-sm flex items-center gap-2",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{ax(aw.filter(b=>b!==a))},className:"hover:text-destructive transition-colors",disabled:y,children:(0,b.jsx)(s.X,{className:"h-3 w-3"})})]},c))}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[aw.length,"/5 tags agregados"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(g.Label,{htmlFor:"price",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,b.jsx)(n.DollarSign,{className:"h-5 w-5 text-primary"}),"Precio (ARS) *"]}),(0,b.jsx)(f.Input,{id:"price",type:"number",placeholder:"5000",value:Y,onChange:a=>{let b=a.target.value;(Number.parseFloat(b)||0)<=aM?_(b):_(aM.toString())},className:"text-base h-14 rounded-xl bg-card border-border text-lg font-semibold",min:"0",max:aM,step:"100",required:!0,disabled:y}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(o,{className:"h-4 w-4"}),"Precio máximo permitido: $",aM.toLocaleString()," ARS"]}),(0,b.jsxs)("div",{className:"bg-accent rounded-xl p-6 space-y-6 border border-border mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Tag,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"hasDiscount",className:"text-base font-bold text-foreground cursor-pointer",children:"Código de Descuento"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ofrecé un descuento especial"})]})]}),(0,b.jsx)(Q,{id:"hasDiscount",checked:ao,onCheckedChange:ap,disabled:y})]}),ao&&(0,b.jsxs)("div",{className:"space-y-4 pt-2 border-t border-border",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"discountCode",className:"text-sm font-semibold text-foreground flex items-center gap-2",children:"Código"}),(0,b.jsx)(f.Input,{id:"discountCode",placeholder:"ARSOUND25",value:as,onChange:a=>at(a.target.value.toUpperCase()),className:"h-11 rounded-lg bg-background",disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:"discountPercent",className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Percent,{className:"h-4 w-4"}),"Porcentaje (máx. ",aN,"%)"]}),(0,b.jsx)(f.Input,{id:"discountPercent",type:"number",placeholder:"25",value:aq,onChange:a=>{ar(Math.min(Number.parseFloat(a.target.value)||0,aN).toString())},className:"h-11 rounded-lg bg-background",min:"0",max:aN,step:"5",disabled:y})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(g.Label,{htmlFor:"discountType",className:"text-sm font-semibold text-foreground",children:"Aplicar a"}),(0,b.jsxs)(x.Select,{value:au,onValueChange:av,disabled:y,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11 rounded-lg bg-background",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Todos los usuarios"}),(0,b.jsx)(x.SelectItem,{value:"first",children:"Primera compra"}),(0,b.jsx)(x.SelectItem,{value:"followers",children:"Mis seguidores"})]})]})]})]}),aS>0&&(0,b.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4 border border-primary/20",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-primary mb-1",children:"Precio con descuento:"}),(0,b.jsxs)("p",{className:"text-2xl font-black text-primary",children:["$",aU.toFixed(0)," ARS"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Ahorro de $",aT.toFixed(0)," ARS (",aS,"% OFF)"]})]})]})]}),aR>0&&(0,b.jsxs)("div",{className:"bg-card rounded-xl p-6 space-y-3 border-2 border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(o,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h3",{className:"font-bold text-foreground",children:"Resumen de Ganancia"})]}),(0,b.jsxs)("div",{className:"space-y-3 text-base",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Precio del pack:"}),(0,b.jsxs)("span",{className:"font-bold text-foreground text-lg",children:["$",new Intl.NumberFormat("es-AR").format(aR)," ARS"]})]}),ao&&aS>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Descuento aplicado (",aS,"%):"]}),(0,b.jsxs)("span",{className:"font-bold text-orange-500 text-lg",children:["- $",new Intl.NumberFormat("es-AR").format(aT)," ARS"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Precio final para el comprador:"}),(0,b.jsxs)("span",{className:"font-bold text-primary text-lg",children:["$",new Intl.NumberFormat("es-AR").format(aU)," ARS"]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Comisión ARSOUND (",(100*aQ).toFixed(0),"%",ao&&aS>0?" del precio final":"","):"]}),(0,b.jsxs)("span",{className:"font-bold text-destructive text-lg",children:["- $",new Intl.NumberFormat("es-AR").format(aV)," ARS"]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t-2 border-border flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-bold text-foreground text-lg",children:"Vas a recibir:"}),(0,b.jsxs)("span",{className:"font-black text-primary text-3xl",children:["$",new Intl.NumberFormat("es-AR").format(aW)]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-accent border border-border",children:[(0,b.jsx)("input",{type:"checkbox",id:"ownership",checked:aa,onChange:a=>ab(a.target.checked),required:!0,className:"mt-1 h-5 w-5 rounded border-border text-primary focus:ring-primary"}),(0,b.jsxs)("label",{htmlFor:"ownership",className:"text-sm text-foreground cursor-pointer",children:[(0,b.jsx)("span",{className:"font-bold",children:"Confirmo que todos los sonidos son propios."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Al subir este pack, declaro que tengo todos los derechos sobre el contenido y que no infringe derechos de autor de terceros."})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,b.jsx)(e.Button,{type:"submit",size:"lg",className:"flex-1 h-14 text-base font-bold rounded-xl bg-primary hover:bg-primary/90",disabled:y||!aG||aR>0&&!aK,children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Loader2,{className:"h-5 w-5 mr-2 animate-spin"}),"Subiendo..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Upload,{className:"h-5 w-5 mr-2"}),"Publicar Pack"]})}),(0,b.jsx)(e.Button,{type:"button",size:"lg",variant:"outline",className:"h-14 text-base font-semibold rounded-xl bg-transparent",onClick:()=>C.push("/"),disabled:y,children:"Cancelar"})]})]})]})}),(0,b.jsx)(d.Footer,{})]}):null}a.s(["default",()=>_],51937)}];

//# sourceMappingURL=app_upload_page_tsx_a48eca4c._.js.map