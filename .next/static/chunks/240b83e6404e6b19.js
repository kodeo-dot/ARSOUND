(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},10708,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(74080);var a=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let n=(0,a.createSlot)(`Primitive.${s}`),o=r.forwardRef((e,r)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?n:s,{...o,ref:r})});return o.displayName=`Primitive.${s}`,{...e,[s]:o}},{}),n=r.forwardRef((e,r)=>(0,t.jsx)(s.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=e.i(25913),i=e.i(47163);let l=(0,o.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(n,{ref:a,className:(0,i.cn)(l(),e),...r}));d.displayName=n.displayName,e.s(["Label",()=>d],10708)},57086,20682,e=>{"use strict";let t=(0,e.i(75254).default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);e.s(["Percent",()=>t],57086),e.i(71645);let r=0,a=new Map,s=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),i({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},n=[],o={toasts:[]};function i(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),n.forEach(e=>{e(o)})}function l({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>i({type:"DISMISS_TOAST",toastId:t});return i({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>i({type:"UPDATE_TOAST",toast:{...e,id:t}})}}e.s(["toast",()=>l],20682)},35501,e=>{"use strict";let t=(0,e.i(75254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>t],35501)},96626,e=>{"use strict";var t=e.i(71645),r=e.i(20783),a=e.i(34620),s=e=>{var s;let o,i,{present:l,children:d}=e,c=function(e){var r,s;let[o,i]=t.useState(),l=t.useRef(null),d=t.useRef(e),c=t.useRef("none"),[u,m]=(r=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>s[e][t]??e,r));return t.useEffect(()=>{let e=n(l.current);c.current="mounted"===u?e:"none"},[u]),(0,a.useLayoutEffect)(()=>{let t=l.current,r=d.current;if(r!==e){let a=c.current,s=n(t);e?m("MOUNT"):"none"===s||t?.display==="none"?m("UNMOUNT"):r&&a!==s?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,a.useLayoutEffect)(()=>{if(o){let e,t=o.ownerDocument.defaultView??window,r=r=>{let a=n(l.current).includes(CSS.escape(r.animationName));if(r.target===o&&a&&(m("ANIMATION_END"),!d.current)){let r=o.style.animationFillMode;o.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=r)})}},a=e=>{e.target===o&&(c.current=n(l.current))};return o.addEventListener("animationstart",a),o.addEventListener("animationcancel",r),o.addEventListener("animationend",r),()=>{t.clearTimeout(e),o.removeEventListener("animationstart",a),o.removeEventListener("animationcancel",r),o.removeEventListener("animationend",r)}}m("ANIMATION_END")},[o,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{l.current=e?getComputedStyle(e):null,i(e)},[])}}(l),u="function"==typeof d?d({present:c.isPresent}):t.Children.only(d),m=(0,r.useComposedRefs)(c.ref,(s=u,(i=(o=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?s.ref:(i=(o=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?s.props.ref:s.props.ref||s.ref));return"function"==typeof d||c.isPresent?t.cloneElement(u,{ref:m}):null};function n(e){return e?.animationName||"none"}s.displayName="Presence",e.s(["Presence",()=>s])},17742,e=>{"use strict";let t,r,a,s;var n=e.i(43476),o=e.i(13293),i=e.i(76841),l=e.i(67881),d=e.i(23750),c=e.i(10708),u=e.i(70065),m=e.i(69074),p=e.i(35501),f=e.i(31278),x=e.i(75254);let g=(0,x.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),h=(0,x.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var v=e.i(57086);let b=(0,x.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var y=e.i(71645),j=e.i(20755),N=e.i(18566),w=e.i(20682),R=e.i(30030),D=e.i(20783),E=e.i(81140),S=e.i(10772),A=e.i(69340),I=e.i(26330),k=e.i(65491),C=e.i(74606),O=e.i(96626),P=e.i(48425),_=e.i(3536),T=e.i(85369),F=e.i(86312),M=Symbol("radix.slottable");function $(e){return y.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===M}var L="Dialog",[U,V]=(0,R.createContextScope)(L),[H,q]=U(L),B=e=>{let{__scopeDialog:t,children:r,open:a,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,l=y.useRef(null),d=y.useRef(null),[c,u]=(0,A.useControllableState)({prop:a,defaultProp:s??!1,onChange:o,caller:L});return(0,n.jsx)(H,{scope:t,triggerRef:l,contentRef:d,contentId:(0,S.useId)(),titleId:(0,S.useId)(),descriptionId:(0,S.useId)(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(e=>!e),[u]),modal:i,children:r})};B.displayName=L;var W="DialogTrigger",z=y.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,s=q(W,r),o=(0,D.useComposedRefs)(t,s.triggerRef);return(0,n.jsx)(P.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":em(s.open),...a,ref:o,onClick:(0,E.composeEventHandlers)(e.onClick,s.onOpenToggle)})});z.displayName=W;var G="DialogPortal",[K,Z]=U(G,{forceMount:void 0}),J=e=>{let{__scopeDialog:t,forceMount:r,children:a,container:s}=e,o=q(G,t);return(0,n.jsx)(K,{scope:t,forceMount:r,children:y.Children.map(a,e=>(0,n.jsx)(O.Presence,{present:r||o.open,children:(0,n.jsx)(C.Portal,{asChild:!0,container:s,children:e})}))})};J.displayName=G;var X="DialogOverlay",Y=y.forwardRef((e,t)=>{let r=Z(X,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,o=q(X,e.__scopeDialog);return o.modal?(0,n.jsx)(O.Presence,{present:a||o.open,children:(0,n.jsx)(ee,{...s,ref:t})}):null});Y.displayName=X;var Q=((s=y.forwardRef((e,t)=>{let{children:r,...a}=e;if(y.isValidElement(r)){var s;let e,n,o=(s=r,(n=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(n=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),i=function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==y.Fragment&&(i.ref=t?(0,D.composeRefs)(t,o):o),y.cloneElement(r,i)}return y.Children.count(r)>1?y.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",t=s,(r=y.forwardRef((e,r)=>{let{children:a,...s}=e,o=y.Children.toArray(a),i=o.find($);if(i){let e=i.props.children,a=o.map(t=>t!==i?t:y.Children.count(e)>1?y.Children.only(null):y.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...s,ref:r,children:y.isValidElement(e)?y.cloneElement(e,void 0,a):null})}return(0,n.jsx)(t,{...s,ref:r,children:a})})).displayName="DialogOverlay.RemoveScroll.Slot",r),ee=y.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,s=q(X,r);return(0,n.jsx)(T.RemoveScroll,{as:Q,allowPinchZoom:!0,shards:[s.contentRef],children:(0,n.jsx)(P.Primitive.div,{"data-state":em(s.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),et="DialogContent",er=y.forwardRef((e,t)=>{let r=Z(et,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,o=q(et,e.__scopeDialog);return(0,n.jsx)(O.Presence,{present:a||o.open,children:o.modal?(0,n.jsx)(ea,{...s,ref:t}):(0,n.jsx)(es,{...s,ref:t})})});er.displayName=et;var ea=y.forwardRef((e,t)=>{let r=q(et,e.__scopeDialog),a=y.useRef(null),s=(0,D.useComposedRefs)(t,r.contentRef,a);return y.useEffect(()=>{let e=a.current;if(e)return(0,F.hideOthers)(e)},[]),(0,n.jsx)(en,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,E.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,E.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,E.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),es=y.forwardRef((e,t)=>{let r=q(et,e.__scopeDialog),a=y.useRef(!1),s=y.useRef(!1);return(0,n.jsx)(en,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||r.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),en=y.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,l=q(et,r),d=y.useRef(null),c=(0,D.useComposedRefs)(t,d);return(0,_.useFocusGuards)(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,n.jsx)(I.DismissableLayer,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":em(l.open),...i,ref:c,onDismiss:()=>l.onOpenChange(!1)})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eg,{titleId:l.titleId}),(0,n.jsx)(eh,{contentRef:d,descriptionId:l.descriptionId})]})]})}),eo="DialogTitle",ei=y.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,s=q(eo,r);return(0,n.jsx)(P.Primitive.h2,{id:s.titleId,...a,ref:t})});ei.displayName=eo;var el="DialogDescription",ed=y.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,s=q(el,r);return(0,n.jsx)(P.Primitive.p,{id:s.descriptionId,...a,ref:t})});ed.displayName=el;var ec="DialogClose",eu=y.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,s=q(ec,r);return(0,n.jsx)(P.Primitive.button,{type:"button",...a,ref:t,onClick:(0,E.composeEventHandlers)(e.onClick,()=>s.onOpenChange(!1))})});function em(e){return e?"open":"closed"}eu.displayName=ec;var ep="DialogTitleWarning",[ef,ex]=(0,R.createContext)(ep,{contentName:et,titleName:eo,docsSlug:"dialog"}),eg=({titleId:e})=>{let t=ex(ep),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},eh=({contentRef:e,descriptionId:t})=>{let r=ex("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return y.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},ev=Symbol("radix.slottable"),eb="AlertDialog",[ey,ej]=(0,R.createContextScope)(eb,[V]),eN=V(),ew=e=>{let{__scopeAlertDialog:t,...r}=e,a=eN(t);return(0,n.jsx)(B,{...a,...r,modal:!0})};ew.displayName=eb;var eR=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,s=eN(r);return(0,n.jsx)(z,{...s,...a,ref:t})});eR.displayName="AlertDialogTrigger";var eD=e=>{let{__scopeAlertDialog:t,...r}=e,a=eN(t);return(0,n.jsx)(J,{...a,...r})};eD.displayName="AlertDialogPortal";var eE=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,s=eN(r);return(0,n.jsx)(Y,{...s,...a,ref:t})});eE.displayName="AlertDialogOverlay";var eS="AlertDialogContent",[eA,eI]=ey(eS),ek=((a=({children:e})=>(0,n.jsx)(n.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",a.__radixId=ev,a),eC=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:a,...s}=e,o=eN(r),i=y.useRef(null),l=(0,D.useComposedRefs)(t,i),d=y.useRef(null);return(0,n.jsx)(ef,{contentName:eS,titleName:eO,docsSlug:"alert-dialog",children:(0,n.jsx)(eA,{scope:r,cancelRef:d,children:(0,n.jsxs)(er,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:(0,E.composeEventHandlers)(s.onOpenAutoFocus,e=>{e.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,n.jsx)(ek,{children:a}),(0,n.jsx)(eL,{contentRef:i})]})})})});eC.displayName=eS;var eO="AlertDialogTitle",eP=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,s=eN(r);return(0,n.jsx)(ei,{...s,...a,ref:t})});eP.displayName=eO;var e_="AlertDialogDescription",eT=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,s=eN(r);return(0,n.jsx)(ed,{...s,...a,ref:t})});eT.displayName=e_;var eF=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,s=eN(r);return(0,n.jsx)(eu,{...s,...a,ref:t})});eF.displayName="AlertDialogAction";var eM="AlertDialogCancel",e$=y.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:s}=eI(eM,r),o=eN(r),i=(0,D.useComposedRefs)(t,s);return(0,n.jsx)(eu,{...o,...a,ref:i})});e$.displayName=eM;var eL=({contentRef:e})=>{let t=`\`${eS}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${eS}\` by passing a \`${e_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${eS}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},eU=e.i(47163);function eV({...e}){return(0,n.jsx)(ew,{"data-slot":"alert-dialog",...e})}function eH({...e}){return(0,n.jsx)(eR,{"data-slot":"alert-dialog-trigger",...e})}function eq({...e}){return(0,n.jsx)(eD,{"data-slot":"alert-dialog-portal",...e})}function eB({className:e,...t}){return(0,n.jsx)(eE,{"data-slot":"alert-dialog-overlay",className:(0,eU.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function eW({className:e,...t}){return(0,n.jsxs)(eq,{children:[(0,n.jsx)(eB,{}),(0,n.jsx)(eC,{"data-slot":"alert-dialog-content",className:(0,eU.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function ez({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,eU.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function eG({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,eU.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function eK({className:e,...t}){return(0,n.jsx)(eP,{"data-slot":"alert-dialog-title",className:(0,eU.cn)("text-lg font-semibold",e),...t})}function eZ({className:e,...t}){return(0,n.jsx)(eT,{"data-slot":"alert-dialog-description",className:(0,eU.cn)("text-muted-foreground text-sm",e),...t})}function eJ({className:e,...t}){return(0,n.jsx)(eF,{className:(0,eU.cn)((0,l.buttonVariants)(),e),...t})}function eX({className:e,...t}){return(0,n.jsx)(e$,{className:(0,eU.cn)((0,l.buttonVariants)({variant:"outline"}),e),...t})}var eY=e.i(38330);function eQ(){let e=(0,N.useParams)(),t=(0,N.useRouter)(),r=e.id,a=(0,j.createBrowserClient)(),[s,x]=(0,y.useState)(!0),[R,D]=(0,y.useState)(!1),[E,S]=(0,y.useState)(!1),[A,I]=(0,y.useState)(null),[k,C]=(0,y.useState)(null),[O,P]=(0,y.useState)("free"),[_,T]=(0,y.useState)(""),[F,M]=(0,y.useState)(""),[$,L]=(0,y.useState)(null),[U,V]=(0,y.useState)(null);(0,y.useEffect)(()=>{H()},[]);let H=async()=>{try{let{data:{user:e}}=await a.auth.getUser();if(!e)return void t.push("/login");C(e);let{data:s}=await a.from("profiles").select("plan").eq("id",e.id).single();s?.plan&&P(s.plan);let{data:n,error:o}=await a.from("packs").select("*").eq("id",r).single();if(o)throw o;if(n.user_id!==e.id){(0,w.toast)({title:"Acceso denegado",description:"No tenés permiso para editar este pack",variant:"destructive"}),t.push(`/pack/${r}`);return}I(n),T(n.price.toString()),M(n.discount_percent?.toString()||""),V(n.cover_image_url)}catch(e){console.error("Error loading pack:",e),(0,w.toast)({title:"Error",description:"No se pudo cargar el pack",variant:"destructive"}),t.push("/")}finally{x(!1)}},q=async e=>{let t=e.name.split(".").pop(),r=`${k.id}/covers/${Date.now()}.${t}`,{error:s}=await a.storage.from("samplepacks").upload(r,e,{cacheControl:"3600",upsert:!1});if(s)throw s;let{data:{publicUrl:n}}=a.storage.from("samplepacks").getPublicUrl(r);return n},B=async()=>{try{D(!0);let e=Number.parseInt(_),s=Number.parseInt(F)||0;if(e<0||e>65e3)return void(0,w.toast)({title:"Error",description:`El precio debe estar entre $0 y $${65e3.toLocaleString()}`,variant:"destructive"});if(s<0||s>50)return void(0,w.toast)({title:"Error",description:"El descuento debe estar entre 0% y 50%",variant:"destructive"});let n=A.cover_image_url;$&&(n=await q($));let{error:o}=await a.from("packs").update({price:e,discount_percent:s,has_discount:s>0,cover_image_url:n}).eq("id",r);if(o)throw o;(0,w.toast)({title:"Pack actualizado",description:"Los cambios se guardaron exitosamente"}),t.push(`/pack/${r}`)}catch(e){console.error("Error saving pack:",e),(0,w.toast)({title:"Error al guardar",description:e.message||"Intenta de nuevo más tarde",variant:"destructive"})}finally{D(!1)}},W=async()=>{try{S(!0);let{error:e}=await a.from("pack_uploads").update({deleted_at:new Date().toISOString()}).eq("pack_id",r).eq("user_id",k.id);e&&console.error("Error marking upload as deleted:",e);let{error:s}=await a.from("packs").delete().eq("id",r);if(s)throw s;(0,w.toast)({title:"Pack eliminado",description:"El pack se eliminó correctamente"}),t.push("/profile")}catch(e){console.error("Error deleting pack:",e),(0,w.toast)({title:"Error al eliminar",description:e.message||"Intenta de nuevo más tarde",variant:"destructive"})}finally{S(!1)}};if(s)return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)(o.Header,{}),(0,n.jsx)("main",{className:"flex-1 container mx-auto px-4 py-12 flex items-center justify-center",children:(0,n.jsx)(f.Loader2,{className:"h-12 w-12 animate-spin text-primary"})}),(0,n.jsx)(i.Footer,{})]});if(!A)return null;let z=Number.parseFloat(_)||0,G=Number.parseFloat(F)||0,K=z*G/100,Z=z-K,J=eY.PLAN_FEATURES[O].commission,X=Z*J;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col bg-background",children:[(0,n.jsx)(o.Header,{}),(0,n.jsx)("main",{className:"flex-1 container mx-auto px-4 py-16",children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,n.jsxs)("div",{className:"space-y-3 mb-12",children:[(0,n.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-foreground",children:"Editar Pack"}),(0,n.jsx)("p",{className:"text-lg text-muted-foreground",children:"Modificá la portada, precio y descuento de tu pack"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"Nota: El nombre del pack no se puede editar"})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)(u.Card,{className:"p-6 rounded-3xl border-border bg-accent/30",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[A.cover_image_url&&(0,n.jsx)("img",{src:A.cover_image_url||"/placeholder.svg",alt:A.title,className:"w-20 h-20 rounded-xl object-cover"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h2",{className:"text-2xl font-black text-foreground",children:A.title}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:A.genre})]})]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)(c.Label,{htmlFor:"cover",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,n.jsx)(p.ImageIcon,{className:"h-5 w-5 text-primary"}),"Cambiar Portada"]}),(0,n.jsxs)("div",{className:"border-2 border-dashed border-border rounded-2xl p-12 hover:border-primary/50 transition-all bg-card",children:[(0,n.jsx)("input",{id:"cover",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){L(t);let e=new FileReader;e.onloadend=()=>{V(e.result)},e.readAsDataURL(t)}},className:"hidden",disabled:R}),(0,n.jsx)("label",{htmlFor:"cover",className:"flex flex-col items-center justify-center cursor-pointer",children:U?(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)("img",{src:U||"/placeholder.svg",alt:"Preview",className:"max-h-80 rounded-xl object-cover border-2 border-border"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center",children:(0,n.jsx)("p",{className:"text-white font-semibold",children:"Cambiar imagen"})})]}):(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:(0,n.jsx)(m.Upload,{className:"h-10 w-10 text-primary"})}),(0,n.jsx)("p",{className:"text-base font-bold text-foreground mb-2",children:"Hacé clic para subir la portada"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"PNG, JPG o WEBP (máx. 5MB)"})]})})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(c.Label,{htmlFor:"price",className:"text-lg font-bold text-foreground",children:"Precio (ARS) *"}),(0,n.jsx)(d.Input,{id:"price",type:"number",value:_,onChange:e=>{let t=e.target.value;65e3>=(Number.parseFloat(t)||0)?T(t):T("65000")},className:"text-base h-14 rounded-xl bg-card border-border text-lg font-semibold",min:"0",max:65e3,step:"100",required:!0,disabled:R}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Precio máximo permitido: $",65e3.toLocaleString()," ARS"]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)(c.Label,{htmlFor:"discount",className:"text-lg font-bold flex items-center gap-2 text-foreground",children:[(0,n.jsx)(v.Percent,{className:"h-5 w-5 text-primary"}),"Descuento (%)"]}),(0,n.jsx)(d.Input,{id:"discount",type:"number",placeholder:"0",value:F,onChange:e=>{M(Math.min(Number.parseFloat(e.target.value)||0,50).toString())},className:"text-base h-14 rounded-xl bg-card border-border text-lg font-semibold",min:"0",max:"50",step:"5",disabled:R}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Descuento máximo: 50%. Dejá en 0 para no aplicar descuento."})]}),z>0&&(0,n.jsxs)(u.Card,{className:"p-6 rounded-3xl border-border bg-accent/50",children:[(0,n.jsx)("h3",{className:"font-bold text-foreground mb-4 text-lg",children:"Resumen de Ganancia"}),(0,n.jsxs)("div",{className:"space-y-3 text-base",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Precio del pack:"}),(0,n.jsxs)("span",{className:"font-bold text-foreground text-lg",children:["$",new Intl.NumberFormat("es-AR").format(z)," ARS"]})]}),G>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-muted-foreground",children:["Descuento aplicado (",G,"%):"]}),(0,n.jsxs)("span",{className:"font-bold text-orange-500 text-lg",children:["- $",new Intl.NumberFormat("es-AR").format(K)," ARS"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Precio final para el comprador:"}),(0,n.jsxs)("span",{className:"font-bold text-primary text-lg",children:["$",new Intl.NumberFormat("es-AR").format(Z)," ARS"]})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"text-muted-foreground",children:["Comisión ARSOUND (",(100*J).toFixed(0),"%):"]}),(0,n.jsxs)("span",{className:"font-bold text-destructive text-lg",children:["- $",new Intl.NumberFormat("es-AR").format(X)," ARS"]})]}),(0,n.jsxs)("div",{className:"pt-3 border-t-2 border-border flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-bold text-foreground text-lg",children:"Vas a recibir:"}),(0,n.jsxs)("span",{className:"font-black text-primary text-3xl",children:["$",new Intl.NumberFormat("es-AR").format(Z-X)]})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[(0,n.jsx)(l.Button,{onClick:B,disabled:R||E,className:"flex-1 h-14 text-base font-bold rounded-xl gap-2",children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Loader2,{className:"h-5 w-5 animate-spin"}),"Guardando..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{className:"h-5 w-5"}),"Guardar Cambios"]})}),(0,n.jsx)(l.Button,{variant:"outline",onClick:()=>t.push(`/pack/${r}`),disabled:R||E,className:"h-14 text-base font-semibold rounded-xl bg-transparent",children:"Cancelar"})]}),(0,n.jsx)(u.Card,{className:"p-6 rounded-3xl border-2 border-destructive/20 bg-destructive/5",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(b,{className:"h-6 w-6 text-destructive"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-bold text-foreground mb-2 text-lg",children:"Zona Peligrosa"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Una vez que elimines este pack, no hay vuelta atrás. Por favor, asegurate antes de continuar."}),(0,n.jsxs)(eV,{children:[(0,n.jsx)(eH,{asChild:!0,children:(0,n.jsx)(l.Button,{variant:"destructive",disabled:R||E,className:"gap-2 rounded-xl",children:E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Loader2,{className:"h-4 w-4 animate-spin"}),"Eliminando..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{className:"h-4 w-4"}),"Eliminar Pack"]})})}),(0,n.jsxs)(eW,{children:[(0,n.jsxs)(ez,{children:[(0,n.jsx)(eK,{children:"¿Estás completamente seguro?"}),(0,n.jsxs)(eZ,{children:['Esta acción no se puede deshacer. Esto eliminará permanentemente tu pack "',A.title,'" y todos los datos asociados a él.']})]}),(0,n.jsxs)(eG,{children:[(0,n.jsx)(eX,{children:"Cancelar"}),(0,n.jsx)(eJ,{onClick:W,className:"bg-destructive text-destructive-foreground",children:"Sí, eliminar pack"})]})]})]})]})]})})]})]})}),(0,n.jsx)(i.Footer,{})]})}e.s(["default",()=>eQ],17742)}]);